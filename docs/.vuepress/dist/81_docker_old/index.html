<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.15" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #22272e;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (userMode === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (userMode === 'dark' || systemDarkMode) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <title>Docker | Course Web Scripting - Professional Bachelor Elektronica-ICT</title><meta name="description" content="Course Web Scripting">
    <link rel="preload" href="/assets/style-zZMpTrNR.css" as="style"><link rel="stylesheet" href="/assets/style-zZMpTrNR.css">
    <link rel="modulepreload" href="/assets/app-u5Fl-cS_.js"><link rel="modulepreload" href="/assets/index.html-DS6lNZCy.js">
    <link rel="prefetch" href="/assets/index.html-Bv6M9QxD.js" as="script"><link rel="prefetch" href="/assets/index.html-DjA55S5H.js" as="script"><link rel="prefetch" href="/assets/index.html-Bw0pMDRC.js" as="script"><link rel="prefetch" href="/assets/index.html-CJe85tg8.js" as="script"><link rel="prefetch" href="/assets/index.html-CK9aXbVr.js" as="script"><link rel="prefetch" href="/assets/index.html-C2T5SuiP.js" as="script"><link rel="prefetch" href="/assets/index.html-B48iAkrs.js" as="script"><link rel="prefetch" href="/assets/index.html-BcGc5IUF.js" as="script"><link rel="prefetch" href="/assets/index.html-evSi_XOB.js" as="script"><link rel="prefetch" href="/assets/index.html-CNIrOKlz.js" as="script"><link rel="prefetch" href="/assets/index.html-BWFi1OD7.js" as="script"><link rel="prefetch" href="/assets/index.html-87t-EkM3.js" as="script"><link rel="prefetch" href="/assets/index.html-Z1NeXTzV.js" as="script"><link rel="prefetch" href="/assets/index.html-B-5GaUXV.js" as="script"><link rel="prefetch" href="/assets/index.html-COM_uTzS.js" as="script"><link rel="prefetch" href="/assets/index.html-Cr2JcNBI.js" as="script"><link rel="prefetch" href="/assets/index.html-UnSiC5oP.js" as="script"><link rel="prefetch" href="/assets/index.html-DbfVK5mp.js" as="script"><link rel="prefetch" href="/assets/index.html-DP9rxP21.js" as="script"><link rel="prefetch" href="/assets/index.html-DLtPYpFr.js" as="script"><link rel="prefetch" href="/assets/index.html-DK7-cvo4.js" as="script"><link rel="prefetch" href="/assets/index.html-0Ht9ae0I.js" as="script"><link rel="prefetch" href="/assets/index.html-BxA0dfn1.js" as="script"><link rel="prefetch" href="/assets/index.html-Bkam1x2P.js" as="script"><link rel="prefetch" href="/assets/404.html-dJO-mpa7.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/"><img class="vp-site-logo" src="/files/afbeelding1.png" alt="Course Web Scripting - Professional Bachelor Elektronica-ICT"><span class="vp-site-name vp-hide-mobile" aria-hidden="true">Course Web Scripting - Professional Bachelor Elektronica-ICT</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/" aria-label="Home"><!---->Home<!----></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://www.vives.be" aria-label="Organization" rel="noopener noreferrer" target="_blank"><!---->Organization<!----></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="mailto:jeroen.reinenbergh@vives.be" aria-label="Contact" rel="noopener noreferrer" target="_blank"><!---->Contact<!----></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/JeroenVives/EOICT_WebScripting" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!---->GitHub<!----></a></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/" aria-label="Home"><!---->Home<!----></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://www.vives.be" aria-label="Organization" rel="noopener noreferrer" target="_blank"><!---->Organization<!----></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="mailto:jeroen.reinenbergh@vives.be" aria-label="Contact" rel="noopener noreferrer" target="_blank"><!---->Contact<!----></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/JeroenVives/EOICT_WebScripting" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!---->GitHub<!----></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">Development tools <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/01_developmenttools/" aria-label="Development Tools"><!---->Development Tools<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">Backend databases <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/41_databases/" aria-label="Databases"><!---->Databases<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/42_setup_mysql/" aria-label="Setup MySQL database"><!---->Setup MySQL database<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/43_setup_mariadb/" aria-label="Setup MariaDB database"><!---->Setup MariaDB database<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/45_create_db_user/" aria-label="Creating a database with an application user"><!---->Creating a database with an application user<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/46_crud_db/" aria-label="CRUD interactions with a database"><!---->CRUD interactions with a database<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">Backend scripting <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/51_intro_express/" aria-label="Intro into Express.js"><!---->Intro into Express.js<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/52_rest_api_crud/" aria-label="Build REST-API&#39;s for CRUD interactions"><!---->Build REST-API&#39;s for CRUD interactions<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/53_rest_api_fileupload/" aria-label="Build RESP-API&#39;s for file interactions"><!---->Build RESP-API&#39;s for file interactions<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/54_security/" aria-label="Backend security"><!---->Backend security<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">Frontend development <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/61_frontend_vue/" aria-label="Frontend development with Vue"><!---->Frontend development with Vue<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/66_routes/" aria-label="Routes in Vue"><!---->Routes in Vue<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/62_restfull_apis/" aria-label="Call backend services through RESTful APIs"><!---->Call backend services through RESTful APIs<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/63_crud/" aria-label="Learning project: To-Do C.R.U.D. App"><!---->Learning project: To-Do C.R.U.D. App<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/64_axios/" aria-label="Axios a alternative to fetch"><!---->Axios a alternative to fetch<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/65_vuetify/" aria-label="Style your pages with Vuetify"><!---->Style your pages with Vuetify<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">Privacy regulations <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/73_privacy/" aria-label="Privacy"><!---->Privacy<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">Deployment <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/81_vm/" aria-label="Virtual Machine"><!---->Virtual Machine<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/82_docker_static/" aria-label="Deploy a HTML,CSS &amp; JS project"><!---->Deploy a HTML,CSS &amp; JS project<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/83_docker_full/" aria-label="Deploy a MySQL, Express &amp; Vue project"><!---->Deploy a MySQL, Express &amp; Vue project<!----></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div class="theme-default-content" vp-content><!--[--><!--]--><div><h1 id="docker" tabindex="-1"><a class="header-anchor" href="#docker"><span>Docker</span></a></h1><p>For this, we presume you already have a device that will function as your server and uses Linux as operating system. We recommend <a href="https://ubuntu.com/download/desktop" target="_blank" rel="noopener noreferrer">Ubuntu&#39;s latest LTS version</a>.</p><p>Docker is an application that simplifies the process of managing application processes in containers. Containers let you run your applications in resource-isolated processes. They’re similar to virtual machines, but containers are more portable, more resource-friendly, and more dependent on the host operating system.</p><p>For applications depending on several services, orchestrating all the containers to start up, communicate, and shut down together can quickly become unwieldy. Docker Compose is a tool that allows you to run multi-container application environments based on definitions set in a YAML file. It uses service definitions to build fully customizable environments with multiple containers that can share networks and data volumes.</p><h2 id="installing-docker-docker-compose" tabindex="-1"><a class="header-anchor" href="#installing-docker-docker-compose"><span>Installing Docker &amp; Docker Compose</span></a></h2><h3 id="installing-docker" tabindex="-1"><a class="header-anchor" href="#installing-docker"><span>Installing Docker</span></a></h3><p>Update your list of packages &amp; install a few prerequisite packages which let <code>apt</code> use packages over HTTPS:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">sudo</span> <span class="token function">apt</span> update</span>
<span class="line"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> apt-transport-https ca-certificates <span class="token function">curl</span> software-properties-common</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>Add the GPG key for the official Docker repository to your system and add it to your APT sources:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">curl</span> <span class="token parameter variable">-fsSL</span> https://download.docker.com/linux/ubuntu/gpg <span class="token operator">|</span> <span class="token function">sudo</span> gpg <span class="token parameter variable">--dearmor</span> <span class="token parameter variable">-o</span> /usr/share/keyrings/docker-archive-keyring.gpg</span>
<span class="line"><span class="token builtin class-name">echo</span> <span class="token string">&quot;deb [arch=<span class="token variable"><span class="token variable">$(</span>dpkg --print-architecture<span class="token variable">)</span></span> signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu <span class="token variable"><span class="token variable">$(</span>lsb_release <span class="token parameter variable">-cs</span><span class="token variable">)</span></span> stable&quot;</span> <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">tee</span> /etc/apt/sources.list.d/docker.list <span class="token operator">&gt;</span> /dev/null</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>Update your list of packages again &amp; make sure you are about to install from the Docker repo instead of the default Ubuntu repo:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">sudo</span> <span class="token function">apt</span> update</span>
<span class="line"><span class="token function">apt-cache</span> policy docker-ce</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="/assets/image1-CULuLL8E.png" alt="image"></p><p>Install Docker &amp; check that it&#39;s running:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> docker-ce</span>
<span class="line"><span class="token function">sudo</span> systemctl status <span class="token function">docker</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="/assets/image2-fmPk08QB.png" alt="image"></p><h3 id="install-docker-compose" tabindex="-1"><a class="header-anchor" href="#install-docker-compose"><span>Install Docker Compose</span></a></h3><p>Download Docker Compose:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> ~/.docker/cli-plugins/</span>
<span class="line"><span class="token function">curl</span> <span class="token parameter variable">-SL</span> https://github.com/docker/compose/releases/download/v2.3.3/docker-compose-linux-x86_64 <span class="token parameter variable">-o</span> ~/.docker/cli-plugins/docker-compose</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>Next, set the correct permissions so that the Docker Compose command is executable:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">chmod</span> +x ~/.docker/cli-plugins/docker-compose</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>To verify that the installation was successful, you can run:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> compose version</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>You should get the version that is installed.</p><h3 id="usefull-commands-for-docker-compose" tabindex="-1"><a class="header-anchor" href="#usefull-commands-for-docker-compose"><span>Usefull commands for Docker Compose</span></a></h3><ul><li>To create and start containers: <code>docker-compose up</code></li><li>Start services with detached mode (services keep running until stopped): <code>docker-compose -d up</code></li><li>Get a list of all images: <code>docker-compose images</code></li><li>Get a list of all containers: <code>docker-compose ps</code></li><li>Stop all containers and remove images, volumes: <code>docker-compose down</code></li></ul><h2 id="example-of-a-project-run-in-docker-compose" tabindex="-1"><a class="header-anchor" href="#example-of-a-project-run-in-docker-compose"><span>Example of a project run in Docker Compose</span></a></h2><p>Let&#39;s say you have a project called <code>FieldMonitor</code> with a <em>Express.js</em> backend in the folder <code>field-api</code> and a <em>Vue</em> frontend in the folder <code>vue-monitor</code>.</p><p>Without Docker Compose you would start the project as follows:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">// Start backend-api</span>
<span class="line"><span class="token builtin class-name">cd</span> field-api</span>
<span class="line"><span class="token function">npm</span> <span class="token function">install</span></span>
<span class="line"><span class="token function">npm</span> run dev</span>
<span class="line"></span>
<span class="line">// Start frontend</span>
<span class="line"><span class="token builtin class-name">cd</span> vue-monitor</span>
<span class="line"><span class="token function">npm</span> <span class="token function">install</span></span>
<span class="line"><span class="token function">npm</span> run dev</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="backend-dockerfile" tabindex="-1"><a class="header-anchor" href="#backend-dockerfile"><span>Backend Dockerfile</span></a></h3><p>With Docker Compose installed, you need two seperate docker files for each environment. Let&#39;s name these Dockerfiles as <code>Dockerfile-dev</code>.</p><div class="language-docker line-numbers-mode" data-highlighter="prismjs" data-ext="docker" data-title="docker"><pre><code><span class="line"><span class="token instruction"><span class="token keyword">FROM</span> node:10</span></span>
<span class="line"><span class="token instruction"><span class="token keyword">WORKDIR</span> /usr/src/app/field-api</span></span>
<span class="line"><span class="token instruction"><span class="token keyword">COPY</span> package*.json ./</span></span>
<span class="line"><span class="token instruction"><span class="token keyword">RUN</span> npm install</span></span>
<span class="line"><span class="token instruction"><span class="token keyword">EXPOSE</span> 3080</span></span>
<span class="line"><span class="token instruction"><span class="token keyword">CMD</span> [<span class="token string">&quot;npm&quot;</span>, <span class="token string">&quot;run&quot;</span>, <span class="token string">&quot;dev&quot;</span>]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li>We are starting from the base image <code>node:10</code>.</li><li>Set the working directory as <code>/usr/src/app/field-api</code>.</li><li>Copy the <code>package.json</code> to install all the dependencies.</li><li>Install all the dependencies</li><li>We need to put this expose command for the documentation purpose so that other developers know this service runs on port <code>3080</code>.</li><li>Finally, we run the command <code>npm run dev</code></li></ol><h3 id="frontend-dockerfile" tabindex="-1"><a class="header-anchor" href="#frontend-dockerfile"><span>Frontend Dockerfile</span></a></h3><div class="language-docker line-numbers-mode" data-highlighter="prismjs" data-ext="docker" data-title="docker"><pre><code><span class="line"><span class="token instruction"><span class="token keyword">FROM</span> node:10</span></span>
<span class="line"><span class="token instruction"><span class="token keyword">WORKDIR</span> /usr/src/app/vue-monitor</span></span>
<span class="line"><span class="token instruction"><span class="token keyword">COPY</span> package*.json ./</span></span>
<span class="line"><span class="token instruction"><span class="token keyword">RUN</span> npm install</span></span>
<span class="line"><span class="token instruction"><span class="token keyword">EXPOSE</span> 8080</span></span>
<span class="line"><span class="token instruction"><span class="token keyword">CMD</span> [<span class="token string">&quot;npm&quot;</span>, <span class="token string">&quot;run&quot;</span>, <span class="token string">&quot;dev&quot;</span>]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li>We are starting from the base image <code>node:10</code>.</li><li>Set the working directory as <code>/usr/src/app/vue-monitor</code></li><li>Copy the <code>package.json</code> to install all the dependencies</li><li>Install all the dependencies</li><li>Exposing the port <code>8080</code></li><li>Finally, we run the command <code>npm run dev</code></li></ol><h3 id="start-commands-in-package-json" tabindex="-1"><a class="header-anchor" href="#start-commands-in-package-json"><span>Start commands in Package.json</span></a></h3><p>In the above Dockerfiles, we are running commands with npm on instantiating the containers. Let’s see what are those commands in each <code>package.json</code> files.</p><p>For the backend, we are running this command <code>npm run dev</code> which in turn runs this command <code>nodemon src/server.js</code>. Since it’s a development environment we are using nodemon which listens for the changes in files and restart the server automatically.</p><p><img src="/assets/image3-BGqoaZGS.png" alt="image"></p><p>For the frontend, we are running this command <code>npm run dev</code> which in turn runs this command <code>vite</code> We are using Vite here to serve the application on port 8080.</p><p><img src="data:image/png;base64,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" alt="image"></p><h3 id="docker-compose-file" tabindex="-1"><a class="header-anchor" href="#docker-compose-file"><span>Docker Compose file</span></a></h3><p>Finally, let’s look at the docker-compose file here. Since we need to run Vue on port <strong>8080</strong> and express API on port <strong>3080</strong> we need to define two services: nodejs-server and vue-ui.</p><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre><code><span class="line"><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&#39;3&#39;</span></span>
<span class="line"><span class="token key atrule">services</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">nodejs-server</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">build</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token key atrule">context</span><span class="token punctuation">:</span> ./field<span class="token punctuation">-</span>api</span>
<span class="line">      <span class="token key atrule">dockerfile</span><span class="token punctuation">:</span> Dockerfile<span class="token punctuation">-</span>dev</span>
<span class="line">    <span class="token key atrule">ports</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> <span class="token string">&quot;3080:3080&quot;</span></span>
<span class="line">    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> field<span class="token punctuation">-</span>api</span>
<span class="line">    <span class="token key atrule">volumes</span><span class="token punctuation">:</span></span>
<span class="line">       <span class="token punctuation">-</span> ./field<span class="token punctuation">-</span>api<span class="token punctuation">:</span>/usr/src/app/field<span class="token punctuation">-</span>api</span>
<span class="line">       <span class="token punctuation">-</span> /usr/src/app/field<span class="token punctuation">-</span>api/node_modules</span>
<span class="line">  <span class="token key atrule">vue-ui</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">build</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token key atrule">context</span><span class="token punctuation">:</span> ./vue<span class="token punctuation">-</span>monitor</span>
<span class="line">      <span class="token key atrule">dockerfile</span><span class="token punctuation">:</span> Dockerfile<span class="token punctuation">-</span>dev</span>
<span class="line">    <span class="token key atrule">ports</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> <span class="token string">&quot;8080:8080&quot;</span></span>
<span class="line">    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> vue<span class="token punctuation">-</span>monitor</span>
<span class="line">    <span class="token key atrule">volumes</span><span class="token punctuation">:</span></span>
<span class="line">       <span class="token punctuation">-</span> ./my<span class="token punctuation">-</span>app<span class="token punctuation">:</span>/usr/src/app/vue<span class="token punctuation">-</span>monitor</span>
<span class="line">       <span class="token punctuation">-</span> /usr/src/app/vue<span class="token punctuation">-</span>monitor/node_modules</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>If you look at the above file we defined two services each has its own docker file. The most important thing here is the volumes part we need to mount the whole part of the application and node_modules folder as well. We need to mount the node_modules folder because the volume is not mounted during the build.</p><h3 id="run-in-development" tabindex="-1"><a class="header-anchor" href="#run-in-development"><span>Run in development</span></a></h3><p>Let’s run the following steps to run the whole setup in the development mode</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">// build with no cache</span>
<span class="line"><span class="token function">docker-compose</span> build --no-cache</span>
<span class="line">// start the services</span>
<span class="line"><span class="token function">docker-compose</span> up</span>
<span class="line">// list the services</span>
<span class="line"><span class="token function">docker-compose</span> <span class="token function">ps</span></span>
<span class="line">// list the containers</span>
<span class="line"><span class="token function">docker</span> <span class="token function">ps</span></span>
<span class="line">// stop services</span>
<span class="line"><span class="token function">docker-compose</span> stop</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="communication-between-services" tabindex="-1"><a class="header-anchor" href="#communication-between-services"><span>Communication between services</span></a></h3><p>Now the services are running on the default network and these services should be reachable by the service name. By default Compose sets up a single network for your app. Each container for a service joins the default network and is both reachable by other containers on that network, and discoverable by them at a hostname identical to the container name.</p><p>We should have the service name in the <code>vue.config.js</code> instead of the localhost.</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token literal-property property">proxy</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token string-property property">&#39;^/field-api&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">&#39;http://field-api:3080&#39;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token literal-property property">changeOrigin</span><span class="token operator">:</span> <span class="token boolean">true</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="start-your-project" tabindex="-1"><a class="header-anchor" href="#start-your-project"><span>Start your project</span></a></h3><p>To start your project just use <code>docker-compose up</code> for temperary use or <code>docker-compose -d up</code> to run the services until you kill them.</p></div><!--[--><!--]--></div><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link label" href="https://github.com/JeroenVives/EOICT_WebScripting/edit/master/docs/81_docker_old/README.md" aria-label="Edit this page" rel="noopener noreferrer" target="_blank"><!--[--><svg class="edit-icon" viewbox="0 0 1024 1024"><g fill="currentColor"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></g></svg><!--]-->Edit this page<!----></a></div><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: ronny.mees@vives.be">Ronny Mees</span><!----><!--]--><!--]--></span></div></div></footer><!----><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-u5Fl-cS_.js" defer></script>
  </body>
</html>
